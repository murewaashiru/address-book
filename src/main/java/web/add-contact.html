<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles/add-contact.css" />
    <title> Add Contact</title>
</head>
<body>
<form id="contact">
    <h3>Add new contact</h3>

    <label for="firstName">First Name</label>
    <input type="text" id="firstName" name="firstName" required><br>

    <label for="lastName">Last Name</label>
    <input type="text" id="lastName" name="lastName" required><br>

    <label for="phoneNumber">Phone Number</label>
    <input type="text" id="phoneNumber" name="phoneNumber" required><br>

    <label for="email">Email</label>
    <input type="email" id="email" name="email" required><br>

    <button name="submit"  id="submit"> Send</button>

</form>

<script type="text/javascript">
    // Add event listener
     const contactForm = document.getElementById('contact');
    contactForm.addEventListener('submit', async function(event){
        event.preventDefault();

        // Get form data
        const firstName = document.getElementById('firstName').value;
        const lastName = document.getElementById('lastName').value;
        const phoneNumber = document.getElementById('phoneNumber').value;
        const email = document.getElementById('email').value;

        const url = 'http://localhost:8080/api/contacts';

        const data = { firstName, lastName, phoneNumber, email };

      // create request object
        const request = new Request(url, {
            method:'POST',
            body: JSON.stringify(data),
            headers: new Headers({
                'Content-Type':'application/json'
            })
        })

      // pass request object to `fetch()`
      fetch(request)
      .then((res) => res.json())
      .then((res)=>{
          alert("Successfully added");
          window.location.href = 'index.html';
      })
    })

</script>

</body>
</html>